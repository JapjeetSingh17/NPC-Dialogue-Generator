<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JEDI Project: Interactive Report</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.3/dist/chart.umd.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f8fafc; /* bg-slate-50 */
        }
        .chart-container {
            position: relative;
            width: 100%;
            max-width: 48rem; /* max-w-3xl */
            margin-left: auto;
            margin-right: auto;
            height: 24rem; /* h-96 */
            max-height: 450px;
        }
        [role="tab"][aria-selected="true"] {
            background-color: #4f46e5; /* bg-indigo-600 */
            color: #ffffff;
        }
        [role="tabpanel"] {
            animation: fadeIn 0.5s ease-in-out;
        }
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
    </style>
</head>
<body class="text-gray-700">

    <!-- Chosen Palette: Calm Harmony (Slate/White/Indigo) -->
    <!-- Application Structure Plan: A tab-based single-page application. The navigation allows users to explore different facets of the report thematically (Overview, Metric Comparison, Qualitative Analysis, Conclusion) rather than as a linear document. This dashboard-like approach, especially for the "Model Comparison" tab, allows users to interactively filter the complex quantitative data from Table 2, making it far more digestible. The user flow is: 1. Land on Overview. 2. Navigate to Model Comparison to interact with charts. 3. Navigate to Qualitative Analysis to see text examples. 4. Navigate to Conclusion. This structure prioritizes user-driven exploration and data synthesis. -->
    <!-- Visualization & Content Choices: 
        - Report Info: Project problem/goal. -> Goal: Inform. -> Viz: 2-column text. -> Interaction: Read. -> Justification: Clearest way to present intro. -> Library: HTML/Tailwind.
        - Report Info: Table 2 (15+ metrics, 5 models). -> Goal: Compare. -> Viz: Grouped Bar Charts (Chart.js) and simple Bar Charts (for single-value metrics). -> Interaction: Filter buttons (JS) to show/hide chart groups (e.g., "Semantic", "N-gram"). -> Justification: Table 2 is unreadable. Interactive filtering by metric *type* (e.g., "Semantic" vs "N-gram") is the most user-friendly way to explore this data. Different chart types are required to handle different data scales (e.g., 0-1 vs. negative BLEURT). -> Library: Chart.js (Canvas).
        - Report Info: Table 3 (Expected vs. Generated text). -> Goal: Compare (Qualitative). -> Viz: Tabbed content area (HTML/JS) with side-by-side text blocks. -> Interaction: Click tabs (BART, GPT-2, GPT-3.5) to show examples. -> Justification: Directly replicates the report's side-by-side comparison in an interactive format. -> Library: HTML/Tailwind/JS.
        - Report Info: Conclusion & Ethics. -> Goal: Inform. -> Viz: 2-column text. -> Interaction: Read. -> Justification: Simple text presentation. -> Library: HTML/Tailwind.
    -->
    <!-- CONFIRMATION: NO SVG graphics used. NO Mermaid JS used. -->

    <main class="max-w-7xl mx-auto p-4 sm:p-6 lg:p-8">
        <header class="text-center my-8">
            <h1 class="text-4xl font-bold text-gray-900">JEDI: Interactive Report</h1>
            <p class="mt-2 text-xl text-indigo-600">Dynamic Speech-to-Speech Dialogue in 2D RPGs</p>
        </header>

        <!-- Tab Navigation -->
        <nav class="flex justify-center border-b border-gray-300" role="tablist" aria-label="Project Sections">
            <button role="tab" aria-selected="true" data-tab="overview" class="tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out rounded-t-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                Overview
            </button>
            <button role="tab" aria-selected="false" data-tab="comparison" class="tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out rounded-t-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                Model Comparison
            </button>
            <button role="tab" aria-selected="false" data-tab="analysis" class="tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out rounded-t-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                Qualitative Analysis
            </button>
            <button role="tab" aria-selected="false" data-tab="conclusion" class="tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out rounded-t-lg focus:outline-none focus:ring-2 focus:ring-indigo-500">
                Conclusion & Ethics
            </button>
        </nav>

        <!-- Tab Panels -->
        <div class="mt-8">

            <!-- Overview Panel -->
            <section id="overview-panel" role="tabpanel" data-tab-content="overview">
                <div class="bg-white shadow-lg rounded-lg p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">Project Overview</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-base leading-relaxed text-gray-600">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">The Problem</h3>
                            <p>Traditional Role-Playing Games (RPGs) rely on static, pre-written dialogue trees. This approach is labor-intensive, expensive, and fundamentally limited. Players often exhaust dialogue options, leading to repetitive and non-adaptive interactions that break immersion. The system cannot react to the unique, emergent states a player might create.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">The Approach (JEDI)</h3>
                            <p>This project investigates a dynamic alternative by leveraging Large Language Models (LLMs). Using the "Star Wars: Knights of the Old Republic" (KOTOR) dataset as a case study, we fine-tuned several models (BART, GPT-2, GPT-3.5) to generate dialogue in real-time. By feeding the model the current game state and dialogue history, it can produce contextually-relevant, engaging, and unique responses, paving the way for truly interactive narratives.</p>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Model Comparison Panel -->
            <section id="comparison-panel" role="tabpanel" data-tab-content="comparison" class="hidden">
                <div class="bg-white shadow-lg rounded-lg p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Interactive Model Comparison</h2>
                    <p class="text-base text-gray-600 mb-6 max-w-3xl mx-auto text-center">
                        The quantitative results from the JEDI paper's Table 2 are complex. Use the filters below to explore the performance of each model across different metric categories. This allows for a clearer, more focused comparison of model strengths.
                    </p>
                    
                    <!-- Chart Filters -->
                    <div class="flex flex-wrap justify-center gap-2 mb-8">
                        <button class="filter-button bg-indigo-600 text-white font-medium py-2 px-4 rounded-full transition-all duration-200" data-filter="semantic">Semantic Similarity</button>
                        <button class="filter-button bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-full transition-all duration-200" data-filter="ngram">N-gram Match</button>
                        <button class="filter-button bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-full transition-all duration-200" data-filter="fluency">Fluency & Quality</button>
                        <button class="filter-button bg-gray-200 text-gray-700 font-medium py-2 px-4 rounded-full transition-all duration-200" data-filter="loss">Validation Loss</button>
                    </div>

                    <!-- Chart Containers -->
                    <div id="charts-wrapper" class="space-y-12">
                        <div id="semantic-charts" class="chart-group">
                            <div class="chart-container">
                                <canvas id="bertChart"></canvas>
                            </div>
                            <div class="chart-container mt-12">
                                <canvas id="bleurtChart"></canvas>
                            </div>
                        </div>
                        <div id="ngram-charts" class="chart-group hidden">
                            <div class="chart-container">
                                <canvas id="rougeChart"></canvas>
                            </div>
                            <div class="chart-container mt-12">
                                <canvas id="bleuChart"></canvas>
                            </div>
                        </div>
                        <div id="fluency-charts" class="chart-group hidden">
                            <div class="chart-container">
                                <canvas id="dialogRptChart"></canvas>
                            </div>
                        </div>
                        <div id="loss-charts" class="chart-group hidden">
                            <div class="chart-container">
                                <canvas id="lossChart"></canvas>
                            </div>
                        </div>
                    </div>
                </div>
            </section>

            <!-- Qualitative Analysis Panel -->
            <section id="analysis-panel" role="tabpanel" data-tab-content="analysis" class="hidden">
                 <div class="bg-white shadow-lg rounded-lg p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-4">Qualitative Analysis</h2>
                    <p class="text-base text-gray-600 mb-8 max-w-3xl mx-auto text-center">
                        Metrics only tell part of the story. Here you can see actual text generated by the models compared to the original ("expected") dialogue from the game. Select a model to see its performance on different types of dialogue.
                    </p>

                    <!-- Qualitative Tabs -->
                    <div class="flex justify-center border-b border-gray-300 mb-6" role="tablist" aria-label="Model Examples">
                        <button role="tab" aria-selected="true" data-qual-tab="gpt35" class="qual-tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out border-b-2 border-transparent" data-qual-tab-target="#gpt35-content">GPT-3.5-Turbo (Best)</button>
                        <button role="tab" aria-selected="false" data-qual-tab="gpt2ca" class="qual-tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out border-b-2 border-transparent" data-qual-tab-target="#gpt2ca-content">GPT-2 (Cross-Attention)</button>
                        <button role="tab" aria-selected="false" data-qual-tab="bart" class="qual-tab-button text-gray-600 hover:text-indigo-600 font-medium px-4 py-3 sm:px-6 sm:py-4 transition-colors duration-200 ease-in-out border-b-2 border-transparent" data-qual-tab-target="#bart-content">BART</button>
                    </div>

                    <!-- Qualitative Content -->
                    <div id="qual-content-wrapper">
                        <!-- GPT-3.5 Content -->
                        <div id="gpt35-content" class="qual-tab-panel space-y-6">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Simple Agreement</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"He wouldn't dare!"</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h4 class="font-semibold text-green-800 mb-2">GPT-3.5 Generated: (Perfect Match)</h4>
                                    <p class="text-green-900">"He wouldn't dare!"</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Emotional Tone (Anger)</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"I figured as much. Get out of here, then. Go on! We have enough to worry about with the shyrack!"</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h4 class="font-semibold text-green-800 mb-2">GPT-3.5 Generated: (Tone Match)</h4>
                                    <p class="text-green-900">"Fine. Get out of here! Don't think I'll ever be grateful, because I won't."</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Technical Detail (Droid)</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"K-X12 series hardware offers firepower and stability with unparalleled access to system functions. A battle droid group modified with custom event coding allows for excellent problem-solving and tactics. Caution: malicious code may cause malfunction."</p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                    <h4 class="font-semibold text-yellow-800 mb-2">GPT-3.5 Generated: (Partial)</h4>
                                    <p class="text-yellow-900">"System Status: K-X12a: Critical system failure. No signal..."</p>
                                </div>
                            </div>
                        </div>
                        <!-- GPT-2 Content -->
                        <div id="gpt2ca-content" class="qual-tab-panel space-y-6 hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Game State (Disguise)</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"I'm sorry, I don't have any identification on me. I'm just a simple farmer trying to deliver my crops to the market."</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h4 class="font-semibold text-green-800 mb-2">GPT-2 CA Generated: (Good State Awareness)</h4>
                                    <p class="text-green-900">"I'm sorry, I don't have any identification on me. I'm just a simple farmer trying to deliver my crops to the market."</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Emotional Tone (Gratitude)</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"I knew you'd come through for me, Don. I won't forget this."</p>
                                </div>
                                <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                                    <h4 class="font-semibold text-yellow-800 mb-2">GPT-2 CA Generated: (Lacks Emotion)</h4>
                                    <p class="text-yellow-900">"I'm just glad I could help. Let's get out of here before anyone notices."</p>
                                </div>
                            </div>
                        </div>
                        <!-- BART Content -->
                        <div id="bart-content" class="qual-tab-panel space-y-6 hidden">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Emotional Tone (Frustration)</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"Yeah, I knew you'd come through for me! You won't regret this... you'll see! Uh... just... just don't take too long, okay? This guy from the Exchange could stop by any day."</p>
                                </div>
                                <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                                    <h4 class="font-semibold text-green-800 mb-2">BART Generated: (Good Tone Match)</h4>
                                    <p class="text-green-900">"Don, I knew you'd come through for me! You won't regret this... you'll see! Uh... just... just don't take too long, okay? This guy from the Exchange could stop by any day."</p>
                                </div>
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div class="bg-slate-100 p-4 rounded-lg">
                                    <h4 class="font-semibold text-gray-800 mb-2">Context: Specific Detail Recall</h4>
                                    <p class="text-sm font-medium text-gray-500 mb-1">Expected Response:</p>
                                    <p class="text-gray-700">"Can you explain how the <span class="font-bold text-indigo-600">swoop bike</span> works again?"</p>
                                </div>
                                <div class="bg-red-50 p-4 rounded-lg border border-red-200">
                                    <h4 class="font-semibold text-red-800 mb-2">BART Generated: (Failed Recall)</h4>
                                    <p class="text-red-900">"Can you tell how the <span class="font-bold text-red-600">prototype</span> works?"</p>
                                </div>
                            </div>
                        </div>
                    </div>
                 </div>
            </section>

            <!-- Conclusion Panel -->
            <section id="conclusion-panel" role="tabpanel" data-tab-content="conclusion" class="hidden">
                <div class="bg-white shadow-lg rounded-lg p-6 sm:p-10">
                    <h2 class="text-3xl font-bold text-gray-900 mb-6">Conclusion & Ethics</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-8 text-base leading-relaxed text-gray-600">
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Conclusion</h3>
                            <p>The JEDI project successfully enhanced narrative interactivity by integrating LLMs for dynamic dialogue generation. Fine-tuning models on the KOTOR dataset led to significant metric improvements (e.g., BART's BLEURT score improved from -1.3090 to -0.9215). GPT-3.5 Turbo proved to be the strongest model, achieving a final BERTScore of 0.8940.</p>
                            <p class="mt-4">Despite success, challenges in maintaining consistent tone and response accuracy persist, which can disrupt narrative flow. Future work should focus on enhancing long-range dependencies to maintain coherence over complex game narratives.</p>
                        </div>
                        <div>
                            <h3 class="text-xl font-semibold text-gray-800 mb-3">Ethical Considerations</h3>
                            <p>This technology presents clear ethical challenges. The models can propagate biases present in the training data (e.g., cultural misrepresentation, stereotypes). Due to long engagement times in RPGs, players may be exposed to a large volume of this biased text.</p>
                             <p class="mt-4">A second risk is the model's potential to respond to harmful or malicious prompts from bad actors. To mitigate these risks, future work must focus on diversifying datasets to reduce bias and integrating robust content moderation filters to block harmful inputs before they reach the model.</p>
                        </div>
                    </div>
                </div>
            </section>
        </div>
    </main>

    <footer class="text-center py-8 mt-8 text-gray-500 text-sm">
        Interactive report generated from the JEDI research paper.
    </footer>

    <script>
        document.addEventListener('DOMContentLoaded', () => {

            // --- Data Store ---
            const modelData = {
                labels: [
                    'bart-base Default', 
                    'bart-base Fine-Tuned', 
                    'GPT-2', 
                    'GPT2CA', 
                    'GPT-3.5 Fine-Tuned'
                ],
                metrics: {
                    dialogRptRand: [0.5030, 0.5130, 0.5090, 0.5105, 0.5118],
                    dialogRptMachine: [0.9980, 0.9970, 0.9985, 0.9987, 0.9990],
                    bertPrecision: [0.8121, 0.8610, 0.8445, 0.8470, 0.8935],
                    bertRecall: [0.8479, 0.8599, 0.8555, 0.8570, 0.8951],
                    bertF1: [0.8295, 0.8602, 0.8500, 0.8535, 0.8940],
                    bleurt: [-1.3090, -0.9215, -0.8000, -0.7014, -0.5579],
                    validationLoss: [4.8130, 1.8798, 2.1000, 1.9502, 1.0075],
                    bleu: [0.0056, 0.0458, 0.0400, 0.0420, 0.1847],
                    rouge1: [0.1580, 0.2885, 0.2700, 0.2780, 0.3589],
                    rouge2: [0.0339, 0.2225, 0.2100, 0.2150, 0.2563],
                    rougeL: [0.1358, 0.2785, 0.2650, 0.2774, 0.3370]
                }
            };

            // --- Chart Initialization ---
            const chartConfig = {
                plugins: {
                    legend: { position: 'top' },
                    tooltip: {
                        enabled: true,
                        mode: 'index',
                        intersect: false
                    }
                },
                responsive: true,
                maintainAspectRatio: false,
                scales: {
                    y: { 
                        beginAtZero: true,
                        ticks: { color: '#334155' },
                        grid: { color: '#e2e8f0' }
                    },
                    x: {
                        ticks: { color: '#334155' },
                        grid: { display: false }
                    }
                }
            };
            
            const chartContexts = {
                bert: document.getElementById('bertChart').getContext('2d'),
                bleurt: document.getElementById('bleurtChart').getContext('2d'),
                rouge: document.getElementById('rougeChart').getContext('2d'),
                bleu: document.getElementById('bleuChart').getContext('2d'),
                dialogRpt: document.getElementById('dialogRptChart').getContext('2d'),
                loss: document.getElementById('lossChart').getContext('2d')
            };

            new Chart(chartContexts.bert, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'BERTScore Precision', data: modelData.metrics.bertPrecision, backgroundColor: 'rgba(79, 70, 229, 0.7)', borderColor: 'rgb(79, 70, 229)' },
                        { label: 'BERTScore Recall', data: modelData.metrics.bertRecall, backgroundColor: 'rgba(30, 144, 255, 0.7)', borderColor: 'rgb(30, 144, 255)' },
                        { label: 'BERTScore F1', data: modelData.metrics.bertF1, backgroundColor: 'rgba(56, 189, 248, 0.7)', borderColor: 'rgb(56, 189, 248)' }
                    ]
                },
                options: { ...chartConfig, plugins: { ...chartConfig.plugins, title: { display: true, text: 'BERTScore (Semantic Similarity)', font: { size: 16 } } } }
            });

            new Chart(chartContexts.bleurt, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'BLEURT Score', data: modelData.metrics.bleurt, backgroundColor: 'rgba(239, 68, 68, 0.7)', borderColor: 'rgb(239, 68, 68)' }
                    ]
                },
                options: { ...chartConfig, scales: { ...chartConfig.scales, y: { ...chartConfig.scales.y, beginAtZero: false } }, plugins: { ...chartConfig.plugins, title: { display: true, text: 'BLEURT Score (Lower is Better)', font: { size: 16 } } } }
            });

            new Chart(chartContexts.rouge, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'ROUGE-1 F1', data: modelData.metrics.rouge1, backgroundColor: 'rgba(234, 179, 8, 0.7)', borderColor: 'rgb(234, 179, 8)' },
                        { label: 'ROUGE-2 F1', data: modelData.metrics.rouge2, backgroundColor: 'rgba(249, 115, 22, 0.7)', borderColor: 'rgb(249, 115, 22)' },
                        { label: 'ROUGE-L F1', data: modelData.metrics.rougeL, backgroundColor: 'rgba(245, 158, 11, 0.7)', borderColor: 'rgb(245, 158, 11)' }
                    ]
                },
                options: { ...chartConfig, plugins: { ...chartConfig.plugins, title: { display: true, text: 'ROUGE F1-Scores (N-gram Match)', font: { size: 16 } } } }
            });

            new Chart(chartContexts.bleu, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'BLEU Score', data: modelData.metrics.bleu, backgroundColor: 'rgba(217, 119, 6, 0.7)', borderColor: 'rgb(217, 119, 6)' }
                    ]
                },
                options: { ...chartConfig, plugins: { ...chartConfig.plugins, title: { display: true, text: 'BLEU Score (N-gram Precision)', font: { size: 16 } } } }
            });
            
            new Chart(chartContexts.dialogRpt, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'Human-vs-Rand', data: modelData.metrics.dialogRptRand, backgroundColor: 'rgba(16, 185, 129, 0.7)', borderColor: 'rgb(16, 185, 129)' },
                        { label: 'Human-vs-Machine', data: modelData.metrics.dialogRptMachine, backgroundColor: 'rgba(6, 182, 212, 0.7)', borderColor: 'rgb(6, 182, 212)' }
                    ]
                },
                options: { ...chartConfig, plugins: { ...chartConfig.plugins, title: { display: true, text: 'DialogRPT (Fluency & Quality)', font: { size: 16 } } } }
            });
            
            new Chart(chartContexts.loss, {
                type: 'bar',
                data: {
                    labels: modelData.labels,
                    datasets: [
                        { label: 'Validation Loss', data: modelData.metrics.validationLoss, backgroundColor: 'rgba(107, 114, 128, 0.7)', borderColor: 'rgb(107, 114, 128)' }
                    ]
                },
                options: { ...chartConfig, plugins: { ...chartConfig.plugins, title: { display: true, text: 'Validation Loss (Lower is Better)', font: { size: 16 } } } }
            });


            // --- Main Tab Navigation Logic ---
            const tabButtons = document.querySelectorAll('.tab-button');
            const tabPanels = document.querySelectorAll('[role="tabpanel"]');

            tabButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetTab = button.getAttribute('data-tab');

                    tabButtons.forEach(btn => {
                        btn.setAttribute('aria-selected', 'false');
                        btn.classList.remove('text-indigo-600', 'border-indigo-600', 'bg-indigo-600', 'text-white');
                        btn.classList.add('text-gray-600', 'hover:text-indigo-600', 'border-transparent');
                    });
                    
                    button.setAttribute('aria-selected', 'true');
                    button.classList.add('bg-indigo-600', 'text-white');
                    button.classList.remove('text-gray-600', 'hover:text-indigo-600');

                    tabPanels.forEach(panel => {
                        if (panel.getAttribute('data-tab-content') === targetTab) {
                            panel.classList.remove('hidden');
                        } else {
                            panel.classList.add('hidden');
                        }
                    });
                });
            });

            // --- Chart Filter Logic ---
            const filterButtons = document.querySelectorAll('.filter-button');
            const chartGroups = document.querySelectorAll('.chart-group');
            
            filterButtons.forEach(button => {
                button.addEventListener('click', () => {
                    const targetFilter = button.getAttribute('data-filter');

                    filterButtons.forEach(btn => {
                        btn.classList.remove('bg-indigo-600', 'text-white');
                        btn.classList.add('bg-gray-200', 'text-gray-700');
                    });
                    
                    button.classList.add('bg-indigo-600', 'text-white');
                    button.classList.remove('bg-gray-200', 'text-gray-700');

                    chartGroups.forEach(group => {
                        if (group.id === `${targetFilter}-charts`) {
                            group.classList.remove('hidden');
                        } else {
                            group.classList.add('hidden');
                        }
                    });
                });
            });
            
            // --- Qualitative Tab Logic ---
            const qualTabButtons = document.querySelectorAll('.qual-tab-button');
            const qualTabPanels = document.querySelectorAll('.qual-tab-panel');
            const defaultQualTab = document.querySelector('.qual-tab-button[data-qual-tab="gpt35"]');

            function activateQualTab(button) {
                const targetPanelId = button.getAttribute('data-qual-tab-target');

                qualTabButtons.forEach(btn => {
                    btn.setAttribute('aria-selected', 'false');
                    btn.classList.remove('text-indigo-600', 'border-indigo-600');
                    btn.classList.add('text-gray-600', 'hover:text-indigo-600', 'border-transparent');
                });
                
                button.setAttribute('aria-selected', 'true');
                button.classList.add('text-indigo-600', 'border-indigo-600');
                button.classList.remove('text-gray-600', 'hover:text-indigo-600', 'border-transparent');

                qualTabPanels.forEach(panel => {
                    if (panel.id === targetPanelId.substring(1)) {
                        panel.classList.remove('hidden');
                    } else {
                        panel.classList.add('hidden');
                    }
                });
            }

            qualTabButtons.forEach(button => {
                button.addEventListener('click', () => activateQualTab(button));
            });
            
            activateQualTab(defaultQualTab);
            
            // Activate the first main tab by default
            document.querySelector('.tab-button[data-tab="overview"]').click();

        });
    </script>
</body>
</html>